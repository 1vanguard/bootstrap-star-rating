/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2013
 * @version 1.0.0
 *
 * A simple yet powerful JQuery star rating plugin for Twitter Bootstrap.
 *
 * Built originally for Yii Framework 2.0. But is usable across frameworks & scenarios.
 * For more JQuery/Bootstrap plugins and demos visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
(function(b){var c=function(e,d){return e===null||e===undefined||e==[]||e===""||d&&b.trim(e)===""};var a=function(e,d){this.$element=b(e);this.min=d.min;this.max=d.max;this.step=d.step;this.disabled=d.disabled;this.readonly=d.readonly;this.rtl=d.rtl;this.size=d.size;this.starTitles=d.starTitles;this.starTitleClasses=d.starTitleClasses;this.resetButton=d.resetButton;this.resetButtonTitle=d.resetButtonTitle;this.resetTitle=d.resetTitle;this.resetTitleClass=d.resetTitleClass;this.resetValue=d.resetValue;this.inputValue=this.$element.val();this.$container=this.createContainer();this.$star=this.$container.children("s");this.$stars=this.$container.find("s");this.$reset=this.$container.find(".reset");this.$caption=this.$container.find(".caption");this._init()};a.prototype={constructor:a,_init:function(){var d=this;d.$element.before(d.$container);d.$element.hide();d.$star.on("click",function(i){var h=b(i.target).parentsUntil("div").length+1;var f=d.starTitleClasses[h];var g='<span class="'+f+'">'+d.starTitles[h]+"</span>";d.$element.val(h);d.$caption.html(g);d.$stars.removeClass("rated");b(i.target).removeClass("rated").addClass("rated");b(i.target).parentsUntil("div","s").removeClass("rated").addClass("rated");d.$element.trigger("rating.change",{value:h,caption:g})});d.$reset.on("click",function(f){var g='<span class="'+d.resetTitleClass+'">'+d.resetTitle+"</span>";d.$stars.removeClass("rated");d.$caption.html(g);d.$element.val(d.resetValue);d.$element.trigger("rating.reset")})},createContainer:function(){var g=this;var h=(g.rtl)?"star-rating-rtl ":"star-rating ";h+=(g.disabled||g.readonly)?"star-rating-disabled":"";h+="rating-"+g.size;var d=g.renderStars();var j=g.renderReset();var f=g.renderCaption();var i=(g.rtl)?f+d+j:j+d+f;var e=b(document.createElement("div")).attr({"class":h}).html(i);return e},renderStars:function(){var g="",d="";var e=this;for(var f=e.min;f<=e.max;f+=e.step){g+=(!c(e.inputValue)&&f<=e.inputValue)?'<s class="rated">':"<s>";d+="</s>"}return g+d},renderReset:function(){var d=this;return'<div class="reset" title="'+d.resetButtonTitle+'">'+d.resetButton+"</div>"},renderCaption:function(){var e=this,g=e.inputValue;var f=c(e.starTitleClasses[g])?e.resetTitleClass:e.starTitleClasses[g];var d=c(e.starTitles[g])?e.resetTitle:e.starTitles[g];return'<div class="caption"><span class="'+f+'">'+d+"</span></div>"}};b.fn.rating=function(e){var d=Array.apply(null,arguments);d.shift();return this.each(function(){var h=b(this),g=h.data("rating"),f=typeof e==="object"&&e;if(!g){h.data("rating",(g=new a(this,b.extend({},b.fn.rating.defaults,f,b(this).data()))))}if(typeof e==="string"){g[e].apply(g,d)}})};b.fn.rating.defaults={min:1,max:5,step:1,disabled:false,readonly:false,rtl:false,size:"md",starTitles:{1:"One Star",2:"Two Stars",3:"Three Stars",4:"Four Stars",5:"Five Stars"},starTitleClasses:{1:"label label-danger",2:"label label-warning",3:"label label-info",4:"label label-primary",5:"label label-success"},resetButton:'<i class="glyphicon glyphicon-minus-sign"></i>',resetButtonTitle:"Reset",resetTitle:"Not Rated",resetTitleClass:"label label-default",resetValue:0}}(jQuery));