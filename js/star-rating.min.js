/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2013
 * @version 1.0.0
 *
 * A simple yet powerful JQuery star rating plugin for Twitter Bootstrap.
 *
 * Built originally for Yii Framework 2.0. But is usable across frameworks & scenarios.
 * For more Yii related demos visit http://demos.krajee.com
 */
(function(b){var c=function(e,d){return e===null||e===undefined||e==[]||e===""||d&&b.trim(e)===""};var a=function(e,d){this.$element=b(e);this.min=d.min;this.max=d.max;this.step=d.step;this.disabled=d.disabled;this.readonly=d.readonly;this.rtl=d.rtl;this.size=d.size;this.showReset=d.showReset;this.showCaption=d.showCaption;this.starCaptions=d.starCaptions;this.starCaptionClasses=d.starCaptionClasses;this.resetButton=d.resetButton;this.resetButtonTitle=d.resetButtonTitle;this.resetCaption=d.resetCaption;this.resetCaptionClass=d.resetCaptionClass;this.resetValue=d.resetValue;this.inactive=(this.disabled||this.readonly);this.inputValue=this.$element.val();this.$resetElement=d.resetElement;this.$captionElement=d.captionElement;this.$container=this.createContainer();this.$star=this.$container.children("s");this.$stars=this.$container.find("s");this.$reset=!c(this.$resetElement)?this.$resetElement:this.$container.find(".reset");this.$caption=!c(this.$captionElement)?this.$captionElement:this.$container.find(".caption");this._init()};a.prototype={constructor:a,_init:function(){var d=this;d.$element.before(d.$container);d.$element.hide();d.$star.on("click",function(i){if(!d.inactive){var h=b(i.target).parentsUntil("div").length+1;var f=d.starCaptionClasses[h];var g='<span class="'+f+'">'+d.starCaptions[h]+"</span>";d.$element.val(h);d.$caption.html(g);d.$stars.removeClass("rated");b(i.target).removeClass("rated").addClass("rated");b(i.target).parentsUntil("div","s").removeClass("rated").addClass("rated");d.$element.trigger("rating.change",{value:h,caption:g})}});d.$reset.on("click",function(f){if(!d.inactive){var g='<span class="'+d.resetCaptionClass+'">'+d.resetCaption+"</span>";d.$stars.removeClass("rated");d.$caption.html(g);d.$element.val(d.resetValue);d.$element.trigger("rating.reset")}})},createContainer:function(){var g=this;var h=(g.rtl)?"star-rating-rtl":"star-rating";h+=g.inactive?((g.disabled)?" "+h+"-disabled ":" "):" "+h+"-active ";h+="rating-"+g.size;var d=g.renderStars();var j=g.renderReset();var f=g.renderCaption();var i=(g.rtl)?f+d+j:j+d+f;var e=b(document.createElement("div")).attr({"class":h}).html(i);return e},renderStars:function(){var g="",d="";var e=this;for(var f=e.min;f<=e.max;f+=e.step){g+=(!c(e.inputValue)&&f<=e.inputValue)?'<s class="rated">':"<s>";d+="</s>"}return g+d},renderReset:function(){var d=this;if(!d.showReset){return""}var e=(d.inactive)?"reset":"reset reset-active";if(!c(d.$resetElement)){d.$resetElement.removeClass(e).addClass(e).attr({title:d.resetButtonTitle});d.$resetElement.html(d.resetButton);return""}return'<div class="'+e+'" title="'+d.resetButtonTitle+'">'+d.resetButton+"</div>"},renderCaption:function(){var e=this,h=e.inputValue;if(!e.showCaption){return""}var g=c(e.starCaptionClasses[h])?e.resetCaptionClass:e.starCaptionClasses[h];var d=c(e.starCaptions[h])?e.resetCaption:e.starCaptions[h];var f='<span class="'+g+'">'+d+"</span>";if(!c(e.$captionElement)){e.$captionElement.removeClass("caption").addClass("caption").attr({title:e.resetButtonTitle});e.$captionElement.html(f);return""}return'<div class="caption">'+f+"</div>"}};b.fn.rating=function(e){var d=Array.apply(null,arguments);d.shift();return this.each(function(){var h=b(this),g=h.data("rating"),f=typeof e==="object"&&e;if(!g){h.data("rating",(g=new a(this,b.extend({},b.fn.rating.defaults,f,b(this).data()))))}if(typeof e==="string"){g[e].apply(g,d)}})};b.fn.rating.defaults={min:1,max:5,step:1,disabled:false,readonly:false,rtl:false,size:"md",showReset:true,showCaption:true,starCaptions:{1:"One Star",2:"Two Stars",3:"Three Stars",4:"Four Stars",5:"Five Stars"},starCaptionClasses:{1:"label label-danger",2:"label label-warning",3:"label label-info",4:"label label-primary",5:"label label-success"},resetButton:'<i class="glyphicon glyphicon-minus-sign"></i>',resetButtonTitle:"Reset",resetCaption:"Not Rated",resetCaptionClass:"label label-default",resetValue:0,captionElement:null,resetElement:null}}(jQuery));